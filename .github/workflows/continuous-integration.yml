name: Continuous Integration

on:
  push:
  pull_request:

jobs:
  backend:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Build back-end
      run: |
        cd back-end
        docker build -t back-end .

    - name: Run and Test back-end
      run: |
        docker run -d --name back-end-container back-end
        docker exec back-end-container npm test

  frontend:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Build front-end
      run: |
        cd front-end
        docker build -t front-end .
